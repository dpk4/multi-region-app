<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Region latency</title>
</head>
<body>
  <pre id="results">Measuring...</pre>
  <script>
    const endpoints = [
      { name: 'us-east-1', url: 'https://g2yektmcmh.us-east-1.awsapprunner.com/' },
      { name: 'us-west-2', url: 'https://pgah7maare.us-west-2.awsapprunner.com/' }
    ];

    async function measureLatency(endpoint) {
      const target = endpoint.url.replace(/\/$/, '') + '/api/ping';
      const start = performance.now();
      try {
        await fetch(target, { mode: 'cors' });
        const end = performance.now();
        return { name: endpoint.name, ms: Math.round(end - start), ok: true };
      } catch (e) {
        const end = performance.now();
        return { name: endpoint.name, ms: Math.round(end - start), ok: false, error: e.message };
      }
    }

    async function run() {
      const results = await Promise.all(endpoints.map(measureLatency));
      const lines = results.map(r =>
        r.ok ? `${r.name}: ${r.ms} ms` : `${r.name}: ${r.ms} ms (error: ${r.error})`
      );
      document.getElementById('results').textContent = lines.join('\n');
    }

    run();
  </script>
</body>
</html>
